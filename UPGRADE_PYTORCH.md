# å‡çº§ PyTorch ä»¥æ”¯æŒ NumPy 2.0+ æŒ‡å—

## ðŸŽ¯ å‡çº§æ–¹æ¡ˆ

### æ–¹æ¡ˆæ¦‚è¿°

ä½¿ç”¨æœ€æ–°çš„ PyTorch ç‰ˆæœ¬ï¼ˆ2.3.0+ï¼‰å¯ä»¥æ”¯æŒ NumPy 2.0+ï¼Œè¿™æ˜¯ä¸€ä¸ªå¯è¡Œçš„æ–¹æ¡ˆã€‚

## ðŸ“Š ç‰ˆæœ¬æ”¯æŒæƒ…å†µ

| PyTorch ç‰ˆæœ¬ | NumPy 1.x | NumPy 2.0+ | è¯´æ˜Ž |
|-------------|-----------|------------|------|
| 2.2.2 | âœ… å®Œå…¨æ”¯æŒ | âŒ ä¸æ”¯æŒ | å½“å‰ç‰ˆæœ¬ |
| 2.3.0 | âœ… å®Œå…¨æ”¯æŒ | âœ… æ”¯æŒ | å¼€å§‹æ”¯æŒ NumPy 2.0+ |
| 2.4.0+ | âœ… å®Œå…¨æ”¯æŒ | âœ… å®Œå…¨æ”¯æŒ | æŽ¨èå‡çº§ç›®æ ‡ |

## ðŸš€ å‡çº§æ­¥éª¤

### æ­¥éª¤ 1: æ£€æŸ¥å½“å‰ç‰ˆæœ¬

```bash
python -c "import torch; print(torch.__version__)"
```

### æ­¥éª¤ 2: å‡çº§ PyTorch

```bash
# å‡çº§åˆ°æœ€æ–°ç¨³å®šç‰ˆ
pip install --upgrade torch torchaudio

# æˆ–æŒ‡å®šç‰ˆæœ¬
pip install torch>=2.3.0 torchaudio>=2.3.0
```

### æ­¥éª¤ 3: å‡çº§ NumPy

```bash
# å‡çº§åˆ° NumPy 2.0+
pip install --upgrade "numpy>=2.0.0"
```

### æ­¥éª¤ 4: éªŒè¯å…¼å®¹æ€§

```python
import torch
import numpy as np

print(f"PyTorch: {torch.__version__}")
print(f"NumPy: {np.__version__}")

# æµ‹è¯•å…¼å®¹æ€§
arr = np.array([1, 2, 3])
tensor = torch.from_numpy(arr)
print("âœ“ å…¼å®¹æ€§æµ‹è¯•é€šè¿‡")
```

## âš–ï¸ å‡çº§çš„åˆ©å¼Š

### âœ… ä¼˜ç‚¹

1. **ä½¿ç”¨æœ€æ–°æŠ€æœ¯**
   - NumPy 2.0+ çš„æ€§èƒ½æ”¹è¿›
   - æ–°çš„ API å’ŒåŠŸèƒ½
   - æ›´å¥½çš„ç±»åž‹ç³»ç»Ÿ

2. **é•¿æœŸæ”¯æŒ**
   - æœªæ¥ NumPy 1.x å¯èƒ½ä¸å†ç»´æŠ¤
   - è·Ÿä¸ŠæŠ€æœ¯å‘å±•è¶‹åŠ¿

3. **æ›´å¥½çš„å…¼å®¹æ€§**
   - ä¸Žå…¶ä»–çŽ°ä»£åº“çš„å…¼å®¹æ€§æ›´å¥½

### âš ï¸ æ³¨æ„äº‹é¡¹

1. **æµ‹è¯•å·¥ä½œ**
   - éœ€è¦å…¨é¢æµ‹è¯•æ‰€æœ‰åŠŸèƒ½
   - ç¡®ä¿ SenseVoice æ­£å¸¸å·¥ä½œ

2. **ä¾èµ–å½±å“**
   - å…¶ä»–ä¾èµ–åº“å¯èƒ½ä¹Ÿéœ€è¦æ›´æ–°
   - `funasr`ã€`modelscope` ç­‰éœ€è¦éªŒè¯

3. **æ–‡ä»¶å¤§å°**
   - æ–°ç‰ˆæœ¬å¯èƒ½æ›´å¤§
   - æ‰“åŒ…åŽçš„æ–‡ä»¶å¯èƒ½å¢žåŠ 

4. **ç¨³å®šæ€§**
   - æ–°ç‰ˆæœ¬å¯èƒ½æœ‰æœªçŸ¥ bug
   - ç”Ÿäº§çŽ¯å¢ƒéœ€è¦è°¨æ…Ž

## ðŸ” æ£€æŸ¥ä¾èµ–å…¼å®¹æ€§

å‡çº§å‰æ£€æŸ¥å…¶ä»–ä¾èµ–æ˜¯å¦æ”¯æŒï¼š

```bash
# æ£€æŸ¥ funasr çš„è¦æ±‚
pip show funasr | grep Requires

# æ£€æŸ¥ modelscope çš„è¦æ±‚
pip show modelscope | grep Requires
```

## ðŸ“ æŽ¨èçš„å‡çº§æ–¹æ¡ˆ

### æ–¹æ¡ˆ A: ä¿å®ˆå‡çº§ï¼ˆæŽ¨èï¼‰

```bash
# å‡çº§åˆ° PyTorch 2.3.0ï¼ˆç¨³å®šä¸”æ”¯æŒ NumPy 2.0+ï¼‰
pip install torch==2.3.0 torchaudio==2.3.0
pip install "numpy>=2.0.0,<2.1.0"  # ä½¿ç”¨ 2.0.x ç³»åˆ—
```

### æ–¹æ¡ˆ B: æœ€æ–°ç‰ˆæœ¬

```bash
# å‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬
pip install --upgrade torch torchaudio
pip install --upgrade "numpy>=2.0.0"
```

### æ–¹æ¡ˆ C: ä¿æŒçŽ°çŠ¶ï¼ˆæœ€ç¨³å®šï¼‰

```bash
# ç»§ç»­ä½¿ç”¨å½“å‰é…ç½®
# PyTorch 2.2.2 + NumPy 1.26.4
# ç¨³å®šå¯é ï¼Œæ— å…¼å®¹æ€§é—®é¢˜
```

## ðŸ§ª æµ‹è¯•æ¸…å•

å‡çº§åŽéœ€è¦æµ‹è¯•ï¼š

- [ ] æ¨¡åž‹åŠ è½½æ˜¯å¦æ­£å¸¸
- [ ] è¯­éŸ³è¯†åˆ«åŠŸèƒ½æ˜¯å¦æ­£å¸¸
- [ ] Web UI æ˜¯å¦æ­£å¸¸å¯åŠ¨
- [ ] å®žæ—¶å½•éŸ³è¯†åˆ«æ˜¯å¦æ­£å¸¸
- [ ] æ–‡ä»¶ä¸Šä¼ è¯†åˆ«æ˜¯å¦æ­£å¸¸
- [ ] æ‰“åŒ…åŽçš„å¯æ‰§è¡Œæ–‡ä»¶æ˜¯å¦æ­£å¸¸

## ðŸ”„ å›žé€€æ–¹æ¡ˆ

å¦‚æžœå‡çº§åŽå‡ºçŽ°é—®é¢˜ï¼Œå¯ä»¥å›žé€€ï¼š

```bash
# å›žé€€åˆ°åŽŸç‰ˆæœ¬
pip install torch==2.2.2 torchaudio==2.2.2
pip install "numpy>=1.21.0,<2.0"
```

## ðŸ“š å‚è€ƒèµ„æº

- [PyTorch å‘å¸ƒè¯´æ˜Ž](https://github.com/pytorch/pytorch/releases)
- [PyTorch å®‰è£…æŒ‡å—](https://pytorch.org/get-started/locally/)
- [NumPy 2.0 è¿ç§»æŒ‡å—](https://numpy.org/devdocs/numpy_2_0_migration_guide.html)

